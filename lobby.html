<!DOCTYPE html>
<html>
<head>
    <title>Game Lobby</title>
</head>
<body>
    <h1>Multiplayer Lobby</h1>
    <input type="text" id="name" placeholder="Enter Name" required>
    <button onclick="joinGame()">Join Game</button>
    <h2>Players:</h2>
    <ul id="playerList"></ul>
    <button onclick="startGame()" id="startButton" disabled>Start Game</button>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.0/socket.io.min.js"></script>
    <script>
        var socket = io("http://localhost:5000");

        // Listen for player list updates
        socket.on("update_lobby", function(data) {
            var playerList = document.getElementById("playerList");
            playerList.innerHTML = "";
            data.players.forEach(player => {
                var li = document.createElement("li");
                li.textContent = player;
                playerList.appendChild(li);
            });

            // Enable "Start Game" button if there are enough players
            document.getElementById("startButton").disabled = data.players.length < 2;
        });

        // Send join request with player name
        function joinGame() {
            var name = document.getElementById("name").value;
            if (name.trim() === "") {
                alert("Please enter a name!");
                return;
            }
            socket.emit("join", { name: name });
        }

        // Send a request to start the game
        function startGame() {
            socket.emit("start_game");
        }

        // Listen for game start notification
        socket.on("game_started", function() {
            alert("Game is starting!");
            // Disable buttons once the game starts
            document.getElementById("startButton").disabled = true;
        });
    </script>
</body>
</html>

